odb_dev:
    extends:
        file: odb/docker-compose.yml
        service: odb
    ports:
        - 27017:27017
api_dev:
    extends:
        file: api/docker-compose.yml
        service: api
    ports:
        - 1337:1337
    volumes:
        - $PWD/api/libs:/src/libs
    links:
        - odb_dev:mongo
    command: sh -c "node bin/createUser.js test test; node bin/createClient.js test-python test-python test; node bin/createClient.js test-scheduler test-scheduler test; node bin/createUser.js scheduler c93lbcp0hc[5209sebf10{3ca; node bin/createClient.js scheduler scheduler-python c93lbcp0hc[5209sebf10{3ca; node bin/api"
www_dev:
    extends:
        file: www/docker-compose.yml
        service: www
    ports:
        - 80:80
    volumes:
        - $PWD/www/libs:/src/libs
    command: sh -c "cp config.dev.json config.json; node bin/www"
scheduler_dev:
    extends:
        file: scheduler/docker-compose.yml
        service: scheduler
    volumes:
        - $PWD/scheduler:/scheduler
        - $PWD/python:/python
    command: sh -c "sleep 20; PYTHONPATH=/python:$PYTHONPATH ./scheduler/create_token.py 192.168.99.100 1337 test test; PYTHONPATH=/python:$PYTHONPATH ./scheduler/scheduler_users.py --local --host 192.168.99.100 --port 1337"
